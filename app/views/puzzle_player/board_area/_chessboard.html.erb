<% square_prefix = local_assigns[:square_prefix] %>
<% show_labels = true %>

<div class="chessboard">
  <% polarity = %w( light dark ).cycle %>
  <% (1..8).to_a.reverse.each do |row| %>
    <% ('a'..'h').to_a.each do |col| %>
      <% square_id = "#{col}#{row}"
         if square_prefix
           square_id = "#{square_prefix}-#{square_id}"
         end
      %>
      <% pole = polarity.next %>
      <div class="square <%= pole %>" id="<%= square_id %>"
           data-square="<%= "#{col}#{row}" %>">
        <% if show_labels %>
          <% if row == 1 %>
            <div class="square-label col <%= pole %>"><%= col %></div>
          <% end %>
          <% if col == 'a' %>
            <div class="square-label row <%= pole %>"><%= row %></div>
          <% end %>
        <% end %>
      </div>
    <% end %>
    <% polarity.next %>
  <% end %>
</div>
